<mat-drawer-container>

<div>

<mat-toolbar fxFlex="1 1 auto" style="justify-content: space-between;border-bottom: 1px none #ddd; background-color: #fff; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, .15);">

  <div id="add-occurrence-button-container" [className]="isMobile ? 'floating-button' : ''">
    <button mat-raised-button color="primary" (click)="navigateToCreateOccurrenceForm()">Ajouter une observation</button>
  </div>

  <div >
    <span class="ui-component-menu-item " *ngIf="getSelectedCount()>0"> {{getSelectedCount()}} observation{{(getSelectedCount()>1) ? 's':''}}  sélectionnée{{(getSelectedCount()>1) ? 's':''}} - </span>

<button *ngIf="isTablet && !isMobile" mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
  <mat-icon>more_vert</mat-icon>
</button>
<mat-menu #menu="matMenu">
  <button mat-menu-item
          *ngIf="getSelectedCount()>0"
          class="thirdary-button"
          (click)="bulkEdit()" 
          matTooltip="Modifier les observations sélectionnées" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">
    <span>Modifier</span>
  </button>
  <button mat-menu-item
          class="thirdary-button"
          (click)="openImportDialog()" 
          matTooltip="Importer un lot d’observations depuis un tableur (consulter le modèle de fichier dans les options)" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">
    <span>Importer</span>
  </button>
  <button mat-menu-item
          class="thirdary-button"
          *ngIf="getSelectedCount()>0"
          matTooltip="Exporter toutes vos observations dans un tableur"
          (click)="doExport()" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">
    <span>Exporter</span>
  </button>
  <button mat-menu-item
          class="thirdary-button"
          *ngIf="getSelectedCount()>0"
          (click)="generatePdfEtiquette()" 
          matTooltipClass="tooltip"
          matTooltip="Créer des étiquettes d'herbier à partir des observations sélectionnées"
          matTooltipPosition="above">
    <span>Etiquettes</span>
  </button>
  <button mat-menu-item
          *ngIf="getSelectedCount()>0"
          class="thirdary-button"
          (click)="openConfirmBulkUnpublishDialog()" 
          matTooltipClass="tooltip"
          matTooltip="Rendre privées les observations sélectionnées"
          matTooltipPosition="above">
    <span>Exporter</span>
  </button>
  <button mat-menu-item
          *ngIf="getSelectedCount()>0"
          class="thirdary-button"
          (click)="openConfirmBulkPublishDialog()" 
          matTooltipClass="tooltip"
          matTooltip="Rendre publiques les observations sélectionnées"
          matTooltipPosition="above">
    <span>Publier</span>
  </button>

  <button mat-menu-item
          *ngIf="getSelectedCount()>0"
          class="thirdary-button"
          (click)="openConfirmBulkDeleteDialog()" 
          matTooltipClass="tooltip"
          matTooltipPosition="above"
          matTooltip="Supprimer les observations sélectionnées" >
    <span>Supprimer</span>
  </button>
</mat-menu>

        <button mat-button
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet"
          class="thirdary-button"
          (click)="bulkEdit()" 
          matTooltip="Modifier les observations sélectionnées" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">Modifier</button>

        <button mat-button
          *ngIf="!isMobile && !isTablet"
          class="thirdary-button"
          (click)="openImportDialog()" 
          matTooltip="Importer un lot d’observations depuis un tableur (consulter le modèle de fichier dans les options)" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">Importer</button>

        <button mat-button
          *ngIf="isMobile"
          class="thirdary-button"
          (click)="openImportDialog()" 
          matTooltip="Importer un lot d’observations depuis un tableur (consulter le modèle de fichier dans les options)" 
          matTooltipClass="tooltip"
          matTooltipPosition="above"><mat-icon svgIcon="import"></mat-icon></button>

        <button mat-button
          class="thirdary-button"
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet; else exportAllTemplate"
          matTooltip="Exporter toutes vos observations dans un tableur"
          (click)="doExport()" 
          matTooltipClass="tooltip"
          matTooltipPosition="above">Exporter</button>

        <ng-template #exportAllTemplate>
        <button mat-button
          *ngIf="!isMobile  && !isTablet"
          class="thirdary-button"
          (click)="doExport()" 
          matTooltip="Exporter toutes vos observations dans un tableur"
          matTooltipClass="tooltip"
          matTooltipPosition="above">Exporter Tout</button>
        </ng-template>

        <button mat-button
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet"
          class="thirdary-button"
          (click)="generatePdfEtiquette()" 
          matTooltip="Créer des étiquettes d'herbier à partir des observations sélectionnées"
          matTooltipClass="tooltip"
          matTooltipPosition="above">Etiquettes</button>

        <button mat-button
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet"
          class="thirdary-button"
          (click)="openConfirmBulkPublishDialog()" 
          matTooltip="Rendre publiques les observations sélectionnées"
          matTooltipClass="tooltip"
          matTooltipPosition="above">Publier</button>

        <button mat-button
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet"
          class="thirdary-button"
          (click)="openConfirmBulkUnpublishDialog()" 
          matTooltip="Rendre privées les observations sélectionnées"
          matTooltipClass="tooltip"
          matTooltipPosition="above">Dépublier</button>

        <button mat-button
          *ngIf="getSelectedCount()>0 && !isMobile && !isTablet"
          class="thirdary-button"
          (click)="openConfirmBulkDeleteDialog()" 
          matTooltip="Supprimer les observations sélectionnées"
          matTooltipClass="tooltip"
          matTooltipPosition="above">Supprimer</button>



      </div>
    </mat-toolbar>

  

</div>



<div id="map" class="map module-right-col-content">
</div>

  <mat-drawer #drawer mode="over" position="end" (closedStart)="onDrawerCloseStart()" (occurrenceDeletedEvent)="redrawMap()"
    [ngClass]="{
      'detail-drawer-mobile': isMobile,
      'detail-drawer': !isMobile }">
    <occurrence-list-detail #odl  > 
    </occurrence-list-detail>

  </mat-drawer>
<!-- [featuresToDisplay]="selected" -->

</mat-drawer-container>
